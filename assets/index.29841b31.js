import{r as m,o as p,c as f,a,F as y,b as g,w as h,t as l,d as v,e as T}from"./vendor.0cd142a8.js";const k=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const e of n.addedNodes)e.tagName==="LINK"&&e.rel==="modulepreload"&&s(e)}).observe(document,{childList:!0,subtree:!0});function d(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerpolicy&&(n.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?n.credentials="include":o.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(o){if(o.ep)return;o.ep=!0;const n=d(o);fetch(o.href,n)}};k();var w=(r,t)=>{for(const[d,s]of t)r[d]=s;return r};const u="FcKdtJs202110",c="parkyoungchan";window.items=m([]);window.done_li=[];window.undone_li=[];const _={methods:{readTodo:async function(){const{data:r}=await axios({url:"https://asia-northeast3-heropy-api.cloudfunctions.net/api/todos",method:"GET",headers:{"content-type":"application/json",apikey:u,username:c}});items.value=[],r.forEach(t=>{items.value.push(t)}),console.log("read")},createTodo:async function(){let r,t;for(;r=prompt("\uD560 \uC77C\uC744 \uC785\uB825\uD574\uC8FC\uC138\uC694:","\uC6B4\uB3D9\uD558\uAE30"),t=Number(prompt("\uC774 \uD560 \uC77C\uC758 \uC21C\uC11C\uB97C \uC785\uB825\uD574\uC8FC\uC138\uC694(\uC22B\uC790\uB9CC \uAC00\uB2A5)","2")),!(r&&t);)alert("Invalid Input!");const{data:d}=await axios({url:"https://asia-northeast3-heropy-api.cloudfunctions.net/api/todos",method:"POST",headers:{"content-type":"application/json",apikey:u,username:c},data:{title:r,order:t}});items.value.splice(t,0,d),await this.refreshList(),console.log("create")},deleteTodo:async function(r){await axios({url:"https://asia-northeast3-heropy-api.cloudfunctions.net/api/todos/"+r,method:"DELETE",headers:{"content-type":"application/json",apikey:u,username:c}});const t=items.value.map(function(d){return d.id}).indexOf(r);items.value.splice(t,1),await this.refreshList(),console.log("delete")},updateTodo:async function(r,t){const d=this.$refs[r+"title"].innerHTML,s=this.$refs[r+"order"].innerHTML;console.log(d,s),await axios({url:"https://asia-northeast3-heropy-api.cloudfunctions.net/api/todos/"+r,method:"PUT",headers:{"content-type":"application/json",apikey:u,username:c},data:{title:d,done:t,order:s}}),console.log("update"),await this.refreshList()},reOrder:async function(r){if(r==null)return;const t=await r.map(d=>d.id);console.log(t),await axios({url:"https://asia-northeast3-heropy-api.cloudfunctions.net/api/todos/reorder",method:"PUT",headers:{"content-type":"application/json",apikey:u,username:c},data:{todoIds:t}})},refreshList:async function(){await this.reOrder(done_li),await this.reOrder(undone_li),this.readTodo()}},setup(){const r=o=>{const n=items.value.filter(e=>e.done==o);return n.sort((e,i)=>e.order>i.order?1:-1),o?done_li=JSON.parse(JSON.stringify(n)):undone_li=JSON.parse(JSON.stringify(n)),n},t=async function(o){await axios({url:"https://asia-northeast3-heropy-api.cloudfunctions.net/api/todos/"+o.id,method:"PUT",headers:{"content-type":"application/json",apikey:u,username:c},data:{title:o.title,done:o.done,order:o.order}}),console.log("update done")};return{getDone:r,onDrop:(o,n)=>{const e=o.dataTransfer.getData("itemID"),i=items.value.find(D=>D.id==e);i.done!=n&&(i.done=n,t(i))},startDrag:(o,n)=>{o.dataTransfer.dropEffect="move",o.dataTransfer.effectAllowed="move",o.dataTransfer.setData("itemID",n.id)}}}},b=["onDragstart"],L=v(". \u2003 "),O=["onClick"],x=["onClick"],A=["onDragstart"],C=v(". \u2003 "),N=["onClick"],E=["onClick"];function I(r,t,d,s,o,n){return p(),f("div",null,[a("button",{onClick:t[0]||(t[0]=(...e)=>n.readTodo&&n.readTodo(...e))},"read"),a("button",{onClick:t[1]||(t[1]=(...e)=>n.createTodo&&n.createTodo(...e))},"create"),a("div",{class:"drop-zone",onDrop:t[2]||(t[2]=e=>s.onDrop(e,!0)),onDragenter:t[3]||(t[3]=h(()=>{},["prevent"])),onDragover:t[4]||(t[4]=h(()=>{},["prevent"]))},[(p(!0),f(y,null,g(s.getDone(!0),e=>(p(),f("div",{key:e.id,class:"drag-el",draggable:"true",onDragstart:i=>s.startDrag(i,e)},[a("h4",null,[a("span",{ref:e.id+"order",contenteditable:"true"},l(e.order),513),L,a("span",{ref:e.id+"title",contenteditable:"true"},l(e.title),513)]),a("p",null,"\uC0DD\uC131\uC77C: "+l(e.createdAt),1),a("p",null,"\uC218\uC815\uC77C: "+l(e.updatedAt),1),a("p",null,"done : "+l(e.done),1),a("button",{onClick:i=>n.deleteTodo(e.id)},"\uC0AD\uC81C\uD558\uAE30",8,O),a("button",{onClick:i=>n.updateTodo(e.id,e.done)},"\uC218\uC815\uD558\uAE30",8,x)],40,b))),128))],32),a("div",{class:"drop-zone",onDrop:t[5]||(t[5]=e=>s.onDrop(e,!1)),onDragenter:t[6]||(t[6]=h(()=>{},["prevent"])),onDragover:t[7]||(t[7]=h(()=>{},["prevent"]))},[(p(!0),f(y,null,g(s.getDone(!1),e=>(p(),f("div",{key:e.id,class:"drag-el",draggable:"true",onDragstart:i=>s.startDrag(i,e)},[a("h4",null,[a("span",{ref:e.id+"order",contenteditable:"true"},l(e.order),513),C,a("span",{ref:e.id+"title",contenteditable:"true"},l(e.title),513)]),a("p",null,"\uC0DD\uC131\uC77C: "+l(e.createdAt),1),a("p",null,"\uC218\uC815\uC77C: "+l(e.updatedAt),1),a("p",null,"done : "+l(e.done),1),a("button",{onClick:i=>n.deleteTodo(e.id)},"\uC0AD\uC81C\uD558\uAE30",8,N),a("button",{onClick:i=>n.updateTodo(e.id,e.done)},"\uC218\uC815\uD558\uAE30",8,E)],40,A))),128))],32)])}var P=w(_,[["render",I]]);const S=T(P);S.mount("#app");
